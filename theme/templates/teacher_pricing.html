{% extends 'base.html' %}
{% load custom_tags %}

{% block content %}

<form method="post" id="pricing-form" class="max-w-md mx-auto p-6 rounded shadow mt-32">
  {% csrf_token %}
  {{ form.non_field_errors }}

  <div class="mb-4">
    <label for="{{ form.price_per_minute_individual.id_for_label }}" class="block mb-1 font-semibold text-white">
      Price per minute (individual):
    </label>
    {{ form.price_per_minute_individual|add_class:"bg-white text-black border border-gray-300 rounded px-3 py-2 w-full" }}
    {{ form.price_per_minute_individual.errors }}
  </div>

  <hr class="my-6">

  <h2 class="text-xl font-semibold mb-4">Earnings Preview</h2>
  <p class="mb-2 text-white">Individual lesson 45 min: <strong><span id="earnings-45min">0.00</span> USD</strong></p>
  <p class="mb-2 text-white">Individual lesson 60 min: <strong><span id="earnings-60min">0.00</span> USD</strong></p>

  <button type="submit" 
          class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded w-full transition">
    Save
  </button>
</form>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const priceIndInput = document.getElementById('{{ form.price_per_minute_individual.id_for_label }}');
    const earnings45min = document.getElementById('earnings-45min');
    const earnings60min = document.getElementById('earnings-60min');

    function calculateEarnings() {
      const priceInd = parseFloat(priceIndInput.value) || 0;
      earnings45min.textContent = (priceInd * 45).toFixed(2);
      earnings60min.textContent = (priceInd * 60).toFixed(2);
    }

    priceIndInput.addEventListener('input', calculateEarnings);
    calculateEarnings();
  });
</script>


{% endblock %}
